import{_ as i,c as a,ac as n,o as l}from"./chunks/framework.CeO_JeQa.js";const c=JSON.parse('{"title":"移植示例 - 添加组件支持","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/contribute/code_component.md","filePath":"zh_CN/contribute/code_component.md","lastUpdated":1744789501000}'),e={name:"zh_CN/contribute/code_component.md"};function t(h,s,p,r,k,o){return l(),a("div",null,s[0]||(s[0]=[n(`<h1 id="移植示例-添加组件支持" tabindex="-1">移植示例 - 添加组件支持 <a class="header-anchor" href="#移植示例-添加组件支持" aria-label="Permalink to &quot;移植示例 - 添加组件支持&quot;">​</a></h1><div class="note custom-block github-alert"><p class="custom-block-title">作者</p><p>kirto</p></div><p>本文说明如何给 xf 包管理仓库添加新的包</p><h1 id="仓库说明" tabindex="-1">仓库说明 <a class="header-anchor" href="#仓库说明" aria-label="Permalink to &quot;仓库说明&quot;">​</a></h1><p>仓库地址：<a href="https://github.com/x-eks-fusion/xf_components" target="_blank" rel="noreferrer">https://github.com/x-eks-fusion/xf_components</a></p><p>该仓库用于保存组件贡献者贡献的仓库。由于我们并不希望组件仓库强依赖 XF 本身的框架，所以，组件分为解耦部分和 xfusion 移植部分。当您使用本仓库的组件且正在使用 xfusion 的时候。可以通过</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> search</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">组件</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>进行模糊搜索功能。 通过：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">组件</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>则可以将组件下载并解压到当前工程的 components 文件夹中，提供给您使用 通过：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">组件</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>则可以删除卸载对应的组件</p><h1 id="贡献说明" tabindex="-1">贡献说明 <a class="header-anchor" href="#贡献说明" aria-label="Permalink to &quot;贡献说明&quot;">​</a></h1><p>对移植者的要求比较高。组件的提供必须要完成中间层、移植层和示例等。</p><h2 id="中间层" tabindex="-1">中间层 <a class="header-anchor" href="#中间层" aria-label="Permalink to &quot;中间层&quot;">​</a></h2><p>中间层要求：</p><ul><li>禁止依赖底层的操作部分需要自行抽象成对阶层，对接部分可以是宏定义，可以是函数声明，可以是函数指针，可以是弱定义等方式。</li><li>尽量直接依赖标准库，依赖标准库需要提前宏定义，方便替换</li><li>可以依赖第三方符合我们标准的解耦中间层，需要在 config.json 中说明</li><li>解耦中间层的配置可以依赖移植层的 xxx_config.h 文件</li><li>这部分可以是单独仓库（子模块），也可以是和移植部分在一起</li></ul><h2 id="移植层" tabindex="-1">移植层 <a class="header-anchor" href="#移植层" aria-label="Permalink to &quot;移植层&quot;">​</a></h2><p>移植层要求：</p><ul><li>依赖 xfusion 层的基础操作，将解耦中间层的对接部分简化</li><li>对 xfusion 层需要的抽象操作需要写明依赖</li><li>尽量不要依赖特定的底层功能，如有需要，例如：硬件加速图像计算等需求。应当提供对应的宏予以选择</li><li>移植层需要对接解耦中间层的配置，修改成 XFConfig 的操作，方便用户使用 menuconfig 进行配置</li></ul><h2 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h2><p>移植者需要提供至少一个示例，提供在移植了 xfusion 后，如何调用的完整流程。说明文件要大致说明示例目标，menuconfig 的配置，编译过程，运行结果。</p><h2 id="readme-md" tabindex="-1">README.md <a class="header-anchor" href="#readme-md" aria-label="Permalink to &quot;README.md&quot;">​</a></h2><p>说明文件，需要简单介绍仓库的功能</p><h2 id="config-json" tabindex="-1">config.json <a class="header-anchor" href="#config-json" aria-label="Permalink to &quot;config.json&quot;">​</a></h2><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cJSON&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件名称</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DaveGamble&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件作者</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.7.18&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件版本</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;license&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Apache-2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件开源协议</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 关键词</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A collection of useful cmake utilities&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件简要描述</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/DaveGamble/cJSON&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件链接</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 依赖组件以及版本</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;links&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Homepage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.json.org/json-en.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 主页链接</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Issues&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/DaveGamble/cJSON/issues&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // issue链接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="其它" tabindex="-1">其它 <a class="header-anchor" href="#其它" aria-label="Permalink to &quot;其它&quot;">​</a></h2><p>移植者如果是移植别人的中间层，则需要标明别人中间层的仓库来源链接，仓库的作者以及开源协议。 如果需要配置的文件，可以使用 XFConfig 进行配置。</p><h1 id="贡献过程" tabindex="-1">贡献过程 <a class="header-anchor" href="#贡献过程" aria-label="Permalink to &quot;贡献过程&quot;">​</a></h1><ol><li>fork <a href="https://github.com/x-eks-fusion/xf_components" target="_blank" rel="noreferrer">文档仓库</a></li><li>添加自己的仓库文件夹</li><li>添加 config.json</li><li>添加<a href="https://www.kernel.org/doc/html/latest/kbuild/kconfig-language.html" target="_blank" rel="noreferrer">XFConfig</a></li><li>提交 PR 合并到主仓库</li></ol>`,30)]))}const u=i(e,[["render",t]]);export{c as __pageData,u as default};
